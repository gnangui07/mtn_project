{% extends 'users/base_auth.html' %}
<!--
  A quoi sert cette page ?
  - Cette page sert à activer votre compte la toute première fois.
  - Vous devez écrire votre email et le mot de passe temporaire reçu par email.
  - Si tout est correct, vous passerez à l'étape suivante pour créer votre vrai mot de passe.

  Ce que vous voyez ici:
  - Un champ pour l'email.
  - Un champ pour le mot de passe temporaire (avec un œil pour afficher/masquer).
  - Un bouton pour valider et continuer.

  Ce que fait le petit programme (en bas de page):
  - Il permet d'afficher ou cacher le mot de passe temporaire quand vous cliquez sur l'icône œil.
-->

{% block title %}Activation du compte - MTN CI{% endblock %}

{% block header_title %}Activation du compte{% endblock %}
{% block header_subtitle %}Bienvenue sur CAPEX Works Valuation Tool{% endblock %}

{% block content %}
<div class="alert alert-info mb-4">
    <i class="fas fa-info-circle"></i>
    <strong>Première connexion</strong><br>
    Veuillez saisir vos identifiants temporaires reçus par email pour activer votre compte.
</div>

<form method="post" id="activateForm">
    {% csrf_token %}
    
    <div class="mb-3">
        <label for="email" class="form-label">
            <i class="fas fa-envelope"></i> Adresse email
        </label>
        <div class="input-group">
            <span class="input-group-text">
                <i class="fas fa-user"></i>
            </span>
            <input 
                type="email" 
                class="form-control" 
                id="email" 
                name="email" 
                placeholder="votre.email@mtn.ci"
                required
                autofocus
            >
        </div>
    </div>
    
    <div class="mb-4">
        <label for="temp_password" class="form-label">
            <i class="fas fa-key"></i> Mot de passe temporaire
        </label>
        <div class="input-group">
            <span class="input-group-text">
                <i class="fas fa-lock"></i>
            </span>
            <input 
                type="password" 
                class="form-control" 
                id="temp_password" 
                name="temp_password" 
                placeholder="Mot de passe reçu par email"
                required
            >
            <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                <i class="fas fa-eye"></i>
            </button>
        </div>
        <small class="text-muted">
            <i class="fas fa-exclamation-triangle"></i> 
            Copiez-collez le mot de passe exactement comme reçu dans l'email
        </small>
    </div>
    
    <!-- Cliquez ici pour envoyer vos informations et passer à la création du vrai mot de passe -->
    <button type="submit" class="btn btn-primary">
        <i class="fas fa-check-circle"></i> Valider et continuer
    </button>
</form>

<div class="text-center mt-4">
    <p class="text-muted">
        <small>
            <i class="fas fa-envelope"></i> 
            Vous n'avez pas reçu l'email ? Vérifiez vos spams ou contactez l'administrateur.
        </small>
    </p>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Montrer / cacher le mot de passe temporaire
    // Explication simple: cliquez sur l'icône œil pour voir ce que vous tapez.
    // Toggle password visibility
    document.getElementById('togglePassword').addEventListener('click', function() {
        const passwordInput = document.getElementById('temp_password');
        const icon = this.querySelector('i');
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            passwordInput.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    });
</script>
{% endblock %}
