/* ============================================================================
   RESPONSIVE GLOBAL - Styles responsive pour toutes les pages MSRN
   ============================================================================
   
   Ce fichier contient les règles CSS responsive globales pour l'ensemble
   de l'application. Il est inclus dans base.html et s'applique à toutes
   les pages.
   
   Breakpoints:
   - 1024px : Tablettes
   - 768px  : Smartphones (portrait)
   - 480px  : Petits smartphones
   - Landscape : Mode paysage mobile
   
   Auteur: MSRN Development Team
   Date: 2025-01-30
   ============================================================================ */

/* ============================================
   RÈGLES GLOBALES - Tous les écrans
   ============================================ */

/* Empêcher le débordement horizontal sur toutes les pages */
.spectrum-page-container,
.evaluation-container,
.dashboard-container {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
}

/* Le contenu des onglets ne doit pas déborder */
.tab-content,
.tab-pane {
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
}

/* Header et éléments principaux contenus */
.spectrum-page-header,
.page-header-content,
.header-main {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

/* Grilles et conteneurs flexibles */
.spectrum-metric-grid,
.info-grid,
.filter-bar,
.filter-header {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

/* ============================================
   TABLETTES (≤ 1024px)
   ============================================ */
@media (max-width: 1024px) {
    /* Conteneurs principaux */
    .spectrum-page-container,
    .dashboard-container {
        width: 100%;
        overflow-x: hidden;
    }
    
    /* Padding réduit pour gagner de l'espace */
    .page-header-content,
    .spectrum-tabs,
    .tab-content,
    .dashboard-container {
        padding-left: 1.5rem !important;
        padding-right: 1.5rem !important;
    }
    
    /* En-têtes et titres */
    .header-main .d-flex.justify-content-between {
        flex-direction: column;
        gap: 1rem;
    }
    
    .header-action-buttons {
        align-self: flex-start;
        width: 100%;
    }
    
    /* Grilles d'information en une colonne */
    .info-grid,
    .card-grid,
    .dashboard-grid {
        grid-template-columns: 1fr !important;
    }
    
    /* Métriques adaptatives */
    .spectrum-metric-grid,
    .metrics-grid {
        grid-template-columns: repeat(2, 1fr) !important;
    }
}

/* ============================================
   SMARTPHONES PORTRAIT (≤ 768px)
   ============================================ */
@media (max-width: 768px) {
    /* === CONTENEURS GLOBAUX === */
    .spectrum-page-container,
    .dashboard-container,
    body {
        padding: 0;
        width: 100%;
        overflow-x: hidden;
    }
    
    /* Padding minimal pour mobile */
    .page-header-content,
    .spectrum-tabs,
    .tab-content,
    .dashboard-container {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    /* === EN-TÊTES === */
    .spectrum-page-header,
    .page-header {
        padding: 1rem 0 !important;
    }
    
    .page-title,
    h1.page-title {
        font-size: 1.5rem !important;
        flex-wrap: wrap;
    }
    
    .header-subtitle {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .supplier-info,
    .project-info {
        font-size: 1rem;
    }
    
    .coordinator-info,
    .meta-info {
        font-size: 0.85rem;
    }
    
    /* === MÉTRIQUES === */
    .spectrum-metric-grid,
    .metrics-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 0.75rem;
    }
    
    .spectrum-metric,
    .metric-card {
        padding: 0.75rem;
    }
    
    .metric-value {
        font-size: 1.25rem;
    }
    
    .metric-label {
        font-size: 0.75rem;
    }
    
    /* === CARTES D'INFORMATION === */
    .info-grid,
    .card-grid,
    .dashboard-grid {
        grid-template-columns: 1fr !important;
        gap: 1rem;
    }
    
    .spectrum-info-card,
    .info-card,
    .card {
        border-radius: 8px;
    }
    
    .info-card-header,
    .card-header {
        padding: 1rem;
    }
    
    .info-item-grid {
        grid-template-columns: 1fr;
        gap: 0.5rem;
        padding: 1rem;
    }
    
    /* === ONGLETS === */
    .spectrum-tabs,
    .nav-tabs {
        flex-wrap: wrap;
        padding: 0 1rem;
    }
    
    .spectrum-tab,
    .nav-tabs .nav-link {
        flex: 1 1 auto;
        min-width: 120px;
        font-size: 0.8rem;
        padding: 0.75rem 0.5rem;
    }
    
    /* === BOUTONS D'ACTION === */
    .header-action-buttons,
    .action-buttons,
    .button-group {
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
    }
    
    .header-action-buttons > *,
    .action-buttons > *,
    .button-group > * {
        flex: 1 1 auto;
        min-width: 120px;
    }
    
    /* === TABLEAUX === */
    .spectrum-table-container,
    .table-container,
    .data-table-container {
        margin-left: -1rem;
        margin-right: -1rem;
        width: calc(100% + 2rem);
        border-radius: 0;
        border-left: none;
        border-right: none;
    }
    
    .data-container,
    .table-responsive {
        max-height: 50vh;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .table-header {
        padding: 1rem;
        flex-direction: column;
        gap: 1rem;
    }
    
    /* === BARRE DE FILTRES === */
    .filter-bar,
    .filter-container {
        padding: 1rem;
    }
    
    .filter-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .filter-buttons,
    .filter-controls {
        flex-wrap: wrap;
        width: 100%;
    }
    
    .spectrum-filter-btn,
    .filter-btn {
        flex: 1 1 auto;
        min-width: 100px;
    }
    
    /* === MENUS DÉROULANTS === */
    .dropdown-menu {
        position: fixed !important;
        left: 1rem !important;
        right: 1rem !important;
        width: auto !important;
        max-width: calc(100vw - 2rem);
    }
    
    /* === FORMULAIRES === */
    .form-row,
    .form-group-row {
        flex-direction: column;
    }
    
    .form-group {
        margin-bottom: 1rem;
    }
    
    /* Empêcher le zoom automatique sur iOS */
    input, select, textarea, button {
        font-size: 16px !important;
    }
    
    /* === MODALS === */
    .modal-dialog {
        margin: 0.5rem;
        max-width: calc(100vw - 1rem);
    }
    
    .modal-content {
        border-radius: 8px;
    }
    
    /* === SIDEBAR === */
    .sidebar,
    .side-panel {
        width: 100% !important;
        position: fixed !important;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
    }
    
    .sidebar.active,
    .side-panel.active {
        transform: translateX(0);
    }
}

/* ============================================
   MODE PAYSAGE MOBILE (≤ 768px landscape)
   ============================================ */
@media (max-width: 768px) and (orientation: landscape) {
    .spectrum-page-header,
    .page-header {
        padding: 0.5rem 0 !important;
    }
    
    .spectrum-metric-grid,
    .metrics-grid {
        grid-template-columns: repeat(4, 1fr) !important;
        gap: 0.5rem;
    }
    
    .spectrum-metric,
    .metric-card {
        padding: 0.5rem;
    }
    
    .metric-value {
        font-size: 1rem;
    }
    
    .metric-label {
        font-size: 0.7rem;
    }
    
    .data-container,
    .table-responsive {
        max-height: 40vh;
    }
}

/* ============================================
   PETITS SMARTPHONES (≤ 480px)
   ============================================ */
@media (max-width: 480px) {
    /* === TITRES === */
    .page-title,
    h1.page-title {
        font-size: 1.25rem !important;
    }
    
    h2 {
        font-size: 1.1rem !important;
    }
    
    h3 {
        font-size: 1rem !important;
    }
    
    /* === MÉTRIQUES EN UNE COLONNE === */
    .spectrum-metric-grid,
    .metrics-grid {
        grid-template-columns: 1fr !important;
    }
    
    .spectrum-metric,
    .metric-card {
        flex-direction: row;
        align-items: center;
        padding: 0.75rem;
    }
    
    .metric-icon {
        width: 36px;
        height: 36px;
        font-size: 1rem;
    }
    
    .metric-value {
        font-size: 1.1rem;
    }
    
    .metric-label {
        font-size: 0.7rem;
    }
    
    /* === ONGLETS COMPACTS === */
    .spectrum-tab,
    .nav-tabs .nav-link {
        font-size: 0.7rem;
        padding: 0.5rem;
        min-width: 80px;
    }
    
    /* === BOUTONS === */
    .btn,
    .spectrum-button {
        font-size: 0.85rem;
        padding: 0.5rem 0.75rem;
    }
    
    /* === CARTES === */
    .spectrum-info-card,
    .info-card,
    .card {
        border-radius: 8px;
        margin-bottom: 0.75rem;
    }
    
    .info-card-header,
    .card-header {
        padding: 0.75rem;
    }
    
    .info-item-grid {
        padding: 0.75rem;
    }
    
    /* === TABLEAUX === */
    .data-container,
    .table-responsive {
        max-height: 45vh;
    }
    
    /* === ESPACEMENTS RÉDUITS === */
    .mb-3 {
        margin-bottom: 0.75rem !important;
    }
    
    .mb-4 {
        margin-bottom: 1rem !important;
    }
    
    .p-3 {
        padding: 0.75rem !important;
    }
    
    .p-4 {
        padding: 1rem !important;
    }
}

/* ============================================
   UTILITAIRES RESPONSIVE
   ============================================ */

/* Masquer sur mobile */
@media (max-width: 768px) {
    .hide-mobile,
    .d-none-mobile {
        display: none !important;
    }
}

/* Afficher uniquement sur mobile */
@media (min-width: 769px) {
    .show-mobile-only,
    .d-block-mobile-only {
        display: none !important;
    }
}

/* Scroll horizontal tactile amélioré */
.touch-scroll {
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
}

/* Empêcher la sélection de texte lors du scroll tactile */
.no-select-mobile {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* ============================================
   ANIMATIONS RESPONSIVE
   ============================================ */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
    /* Masquer les éléments non imprimables */
    .no-print,
    .sidebar,
    .navbar,
    .header-action-buttons,
    .filter-bar,
    .scroll-indicator {
        display: none !important;
    }
    
    /* Optimiser pour l'impression */
    body {
        font-size: 12pt;
        line-height: 1.5;
    }
    
    .page-break {
        page-break-after: always;
    }
    
    /* Tableaux en pleine largeur */
    table {
        width: 100% !important;
        page-break-inside: avoid;
    }
}
